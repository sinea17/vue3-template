var W=Object.defineProperty;var J=(s,e,r)=>e in s?W(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var u=(s,e,r)=>(J(s,typeof e!="symbol"?e+"":e,r),r);import{G as z,a6 as $,A as D,a7 as q,a8 as O,d as X,t as U,a9 as Z,aa as j,ab as ee,e as te,v as re,x as ae,l as oe,y as se,Q as ne,o as m,c as R,w as o,a as t,u as V,z as M,a4 as A,n as w,f as h,N as f,m as b,S as B,R as S,H as ie,r as le,ac as ue,q as de,s as ce,ad as pe,_ as he}from"./components-7ef916d1.js";import{a as _e,r as Y,A as me}from"./index-2d4a408e.js";const G=new me,fe=()=>{Y.push("/login")};class H{constructor(e){u(this,"service");this.service=_e.create(e),this.service.interceptors.request.use(r=>{G.addPending(r);const a=z();return{timeout:1e4,...r,headers:{...r.headers,authorization:a.token}}},r=>Promise.reject(r)),this.service.interceptors.response.use(r=>{const{data:a,config:_,status:d}=r;if(d==200&&$(a)=="blob")return a;const c=z();return G.removePending(_),a.code==401?(D.error(a.msg),c.setToken(""),fe(),Promise.reject(a)):a.code!==200?(D.error(a.msg||`\u672A\u77E5\u9519\u8BEF\uFF08code:${a.code}\uFF09`),Promise.reject(a)):a},r=>{const{response:a}=r;return r.message.indexOf("timeout")!==-1&&D.error("\u8BF7\u6C42\u8D85\u65F6"),a&&D.error("\u8BF7\u6C42\u5931\u8D25"),window.navigator.onLine||Y.replace({path:"/500"}),Promise.reject(r)})}get(e,r,a={}){return this.service.get(e,{params:r,...a})}getCarryPathVariable(e,r,a,_={}){let d=e;return Object.keys(a).forEach(function(c){d=d.replace("{"+c+"}",a[c])}),this.service.get(d,{params:r,..._})}post(e,r,a={}){return this.service.post(e,r,a)}postForm(e,r,a={}){var _=new URLSearchParams;for(var d in r)_.append(d,r[d]);return a={headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}},this.service.post(e,_,a)}postFormCarryPathVariable(e,r,a,_={}){let d=e;Object.keys(a).forEach(function(F){d=d.replace("{"+F+"}",a[F])});var c=new URLSearchParams;for(var x in r)c.append(x,r[x]);return _={headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}},this.service.post(d,c,_)}}class ge{constructor(){u(this,"http");u(this,"getAllDriverOrder",e=>this.http.postForm("/enterprise/order/v1/get_all_driver_order",e));u(this,"getTimeShareOrderDetail",e=>this.http.postFormCarryPathVariable("/timeSharing/driver/order/v1/get_order_detail/{orderId}",{},{orderId:e}));u(this,"getTimeShareVehicleCheck",e=>this.http.get("/timeSharing/driver/order/get_time_sharing_CheckList",{orderId:e}));u(this,"getVehicleFaultList",e=>this.http.get("/timeSharing/order/v1/get_fault_report_list",e));u(this,"getTimeShareVehicleScars",e=>this.http.get("/timeSharing/order/getRentCheckList",{orderId:e}));u(this,"exportOrderList",e=>this.http.post("/enterprise/order/v1/export_order",e));this.http=new H({baseURL:"https://www.yycxchina.com/clientapi"})}}const ve=new ge;class ye{constructor(){u(this,"http");u(this,"login",e=>this.http.postForm("/auth/v1/enterprise/web/login",e));u(this,"getCodeImg",()=>this.http.get("/sms/v1/make"));u(this,"getCodeSMS",e=>this.http.postFormCarryPathVariable("/sms/v1/code/{phone}",e,{phone:e.phone}));u(this,"getEnterpriseDriverInfo",e=>this.http.get("/driver/base/enterprise/v1/get_enterprise_driver_info",e));u(this,"getConfig",e=>this.http.getCarryPathVariable("/config/v1/get_config/{paramKey}",{},{paramKey:e}));this.http=new H({baseURL:"https://www.yycxchina.com/clientapi"})}}const we=new ye;function be(s){return q(s,O)}function Se(s,e,r){return be(r)}function xe(s){return $(s)=="number"?"\uFFE5"+s.toFixed(2):"--"}function Fe(s,e,r){return xe(r)}const L=s=>(de("data-v-0a5b95ac"),s=s(),ce(),s),Ce=L(()=>h("h3",null,"\u57FA\u7840\u5217\u8868",-1)),ke=L(()=>h("h3",null,"\u641C\u7D22\u5217\u8868",-1)),Te=L(()=>h("h3",null,"\u641C\u7D22+\u53F3\u4FA7\u64CD\u4F5C\u6309\u94AE",-1)),De={class:"c-search-form"},Ee={class:"c-search-form-sub"},Pe={class:"countdown"},Re={key:0,"data-text":"\u65F6"},Ve={key:1,"data-text":"\u5206"},Ae={"data-text":"\u79D2"},Le={class:"countup"},Ie={key:0,"data-text":"\u65F6"},Ne={key:1,"data-text":"\u5206"},ze={"data-text":"\u79D2"},Ue={key:1},Me=X({__name:"index",setup(s){const e=[{key:"fuzzySearch",el:"input",placeholder:"\u641C\u7D22\u5185\u5BB9",slots:[{name:"prefix",render:()=>t(A,{name:"search",size:"16px"},null)}]},{key:"timeRanges",el:"date-picker",type:"daterange",valueFormat:"YYYY-MM-DD",events:{change:n=>{a.value.formParam.startTime=n&&n[0],a.value.formParam.endTime=n&&n[1]}}},{key:"takingType",defaultValue:1},{key:"businessId",defaultValue:6}],r=[{prop:"orderNo",label:"\u8BA2\u5355\u7F16\u53F7",minWidth:"215px"},{prop:"businessId",label:"\u4E1A\u52A1",formatter:Se},{prop:"orderState",label:"\u72B6\u6001",render:n=>t("span",{class:"state state-"+n.row.orderState},[q(n.row.orderState,pe)])},{prop:"node",label:"\u8282\u70B9"},{prop:"address",label:"\u5730\u5740",headerRender:n=>t(le("el-button"),{type:"primary"},{default:()=>[n.label]})},{prop:"receivableMoney",label:"\u8BA2\u5355\u91D1\u989D",formatter:Fe}],a=U(),_=()=>{a.value.getTableData()},d=n=>{console.log(n)};let c=0;const x=async(n,y)=>(c||(c=(await we.getConfig("TIME_SHARING_FREE_PICKUP_TIME")).data.paramValue*6e4),n=n.map(i=>{if(i.orderState==4){const g=new Date(y).getTime()-new Date(i.gmtCreate).getTime();i.freeDuration=c>g?c-g:0,i.outDuration=c>g?0:g-c}return i}),n),F=n=>{console.log("\u5012\u8BA1\u65F6\u7ED3\u675F",n),n.freeDuration=0},v=U("123"),E=[{date:"2016-05-03",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-02",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-04",name:"Tom",address:"No. 189, Grove St, Los Angeles"},{date:"2016-05-01",name:"Tom",address:"No. 189, Grove St, Los Angeles"}];return(n,y)=>{const i=Z,g=j,P=ee,C=te,I=re,k=ae,T=oe,N=se,K=ue,Q=ne;return m(),R(Q,{direction:"vertical",alignment:"start",fill:!0},{default:o(()=>[t(C,null,{header:o(()=>[Ce]),default:o(()=>[t(g,{data:E,stripe:""},{default:o(()=>[t(i,{prop:"date",label:"Date"}),t(i,{prop:"name",label:"Name"}),t(i,{prop:"address",label:"Address"})]),_:1}),t(P,{layout:"pager, sizes",total:50,"page-sizes":[5,10,15,20]})]),_:1}),t(C,null,{header:o(()=>[ke]),default:o(()=>[t(N,{inline:!0},{default:o(()=>[t(k,null,{default:o(()=>[t(I,{modelValue:V(v),"onUpdate:modelValue":y[0]||(y[0]=l=>M(v)?v.value=l:null),placeholder:"\u641C\u7D22\u5185\u5BB9",clearable:""},{prefix:o(()=>[t(A,{name:"search",size:"16px"})]),_:1},8,["modelValue"])]),_:1}),t(k,{btn:""},{default:o(()=>[t(T,{type:"primary"},{default:o(()=>[w("\u67E5\u8BE2")]),_:1})]),_:1})]),_:1}),t(g,{data:E,stripe:""},{default:o(()=>[t(i,{prop:"date",label:"Date"}),t(i,{prop:"name",label:"Name"}),t(i,{prop:"address",label:"Address"})]),_:1}),t(P,{layout:"pager, sizes",total:50,"page-sizes":[5,10,15,20]})]),_:1}),t(C,null,{header:o(()=>[Te]),default:o(()=>[h("div",De,[t(N,{inline:!0},{default:o(()=>[t(k,null,{default:o(()=>[t(I,{modelValue:V(v),"onUpdate:modelValue":y[1]||(y[1]=l=>M(v)?v.value=l:null),placeholder:"\u641C\u7D22\u5185\u5BB9",clearable:""},{prefix:o(()=>[t(A,{name:"search",size:"16px"})]),_:1},8,["modelValue"])]),_:1}),t(k,{btn:""},{default:o(()=>[t(T,{type:"primary"},{default:o(()=>[w("\u67E5\u8BE2")]),_:1})]),_:1})]),_:1}),h("div",Ee,[t(T,null,{default:o(()=>[w("\u5BFC\u51FA\u6570\u636E")]),_:1})])]),t(g,{data:E,stripe:""},{default:o(()=>[t(i,{prop:"date",label:"Date"}),t(i,{prop:"name",label:"Name"}),t(i,{prop:"address",label:"Address"})]),_:1}),t(P,{layout:"pager, sizes",total:50,"page-sizes":[5,10,15,20]})]),_:1}),t(C,null,{header:o(()=>[h("h3",{onClick:_},"\u5F00\u7BB1\u5373\u7528\u8868\u683C\u7EC4\u4EF6")]),default:o(()=>[t(K,{ref_key:"tableRef",ref:a,api:V(ve).getAllDriverOrder,searchParam:e,columnList:r,dataFormatter:x,highlightCurrentRow:"",onRowClick:d},{receivableMoney:o(l=>[t(T,{type:"primary",link:""},{default:o(()=>[w(f(l.row.receivableMoney),1)]),_:2},1024)]),address:o(l=>[h("div",null,f(l.row.originAddr),1),h("div",null,f(l.row.destAddr),1)]),node:o(l=>[l.row.orderState==4?(m(),b(ie,{key:0},[l.row.freeDuration?(m(),R(B,{key:0,duration:l.row.freeDuration,onFinish:p=>F(l.row)},{default:o(p=>[w(" \u514D\u8D39\u53D6\u8F66\u65F6\u95F4 "),h("div",Pe,[p.hours?(m(),b("span",Re,f(p.hours),1)):S("",!0),p.minutes||p.hours?(m(),b("span",Ve,f(p.minutes),1)):S("",!0),h("span",Ae,f(p.seconds),1)])]),_:2},1032,["duration","onFinish"])):S("",!0),l.row.freeDuration?S("",!0):(m(),R(B,{key:1,duration:l.row.outDuration||0,countup:""},{default:o(p=>[w(" \u53D6\u8F66\u8D85\u65F6 "),h("div",Le,[p.hours?(m(),b("span",Ie,f(p.hours),1)):S("",!0),p.minutes||p.hours?(m(),b("span",Ne,f(p.minutes),1)):S("",!0),h("span",ze,f(p.seconds),1)])]),_:2},1032,["duration"]))],64)):(m(),b("span",Ue,"--"))]),_:1},8,["api"])]),_:1})]),_:1})}}});const qe=he(Me,[["__scopeId","data-v-0a5b95ac"]]);export{qe as default};
