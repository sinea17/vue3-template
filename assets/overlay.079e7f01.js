import{as as j,B as D,av as q,h as w,$ as G,aw as h,z as B,O as k,d as J,a as K,C as O,ag as Q,r as v,s as X,V as R,m as S,a1 as ee,n as oe,a0 as te}from"./index.45dae07d.js";import{P as x}from"./vnode.e735c843.js";import{i as le}from"./index.e8f8bb63.js";import{g as ne,U as F}from"./index.4d9c5243.js";import{a as z,g as ae,u as P}from"./index.b87acd35.js";import{u as se}from"./index.7c3f5f33.js";import{u as T}from"./index.4e9f60b2.js";import{h as I,g as ue,c as ce,r as ie,a as re}from"./style.886d0ddf.js";import{t as de}from"./error.7e8331f1.js";const fe=e=>{j(e)||de("[useLockscreen]","You need to pass a ref param to this function");const o=D("popup"),a=q(()=>o.bm("parent","hidden"));if(!z||I(document.body,a.value))return;let t=0,u=!1,c="0";const l=()=>{setTimeout(()=>{ie(document.body,a.value),u&&(document.body.style.width=c)},200)};w(e,r=>{if(!r){l();return}u=!I(document.body,a.value),u&&(c=document.body.style.width),t=ne(o.namespace.value);const s=document.documentElement.clientHeight<document.body.scrollHeight,d=ue(document.body,"overflowY");t>0&&(s||d==="scroll")&&u&&(document.body.style.width=`calc(100% - ${t}px)`),ce(document.body,a.value)}),G(()=>l())},ye=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,a=!1;return{onClick:l=>{o&&a&&e(l),o=a=!1},onMousedown:l=>{o=l.target===l.currentTarget},onMouseup:l=>{a=l.target===l.currentTarget}}},me=B({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),ve={click:e=>e instanceof MouseEvent};var pe=J({name:"ElOverlay",props:me,emits:ve,setup(e,{slots:o,emit:a}){const t=D("overlay"),u=s=>{a("click",s)},{onClick:c,onMousedown:l,onMouseup:r}=ye(e.customMaskEvent?void 0:u);return()=>e.mask?K("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:l,onMouseup:r},[O(o,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):Q("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[O(o,"default")])}});const Oe=pe,Ce=B({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:le},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Se={close:()=>!0},Pe=B({...Ce,appendToBody:{type:Boolean,default:!1},beforeClose:{type:k(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Te={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[F]:e=>ae(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ie=(e,o)=>{const t=te().emit,{nextZIndex:u}=se();let c="";const l=T(),r=T(),s=v(!1),d=v(!1),m=v(!1),p=v(e.zIndex||u());let f,y;const N=X("namespace",R),A=S(()=>{const n={},i=`--${N.value}-dialog`;return e.fullscreen||(e.top&&(n[`${i}-margin-top`]=e.top),e.width&&(n[`${i}-width`]=re(e.width))),n}),L=S(()=>e.alignCenter?{display:"flex"}:{});function V(){t("opened")}function $(){t("closed"),t(F,!1),e.destroyOnClose&&(m.value=!1)}function H(){t("close")}function E(){y==null||y(),f==null||f(),e.openDelay&&e.openDelay>0?{stop:f}=P(()=>M(),e.openDelay):M()}function C(){f==null||f(),y==null||y(),e.closeDelay&&e.closeDelay>0?{stop:y}=P(()=>g(),e.closeDelay):g()}function b(){function n(i){i||(d.value=!0,s.value=!1)}e.beforeClose?e.beforeClose(n):C()}function Y(){e.closeOnClickModal&&b()}function M(){!z||(s.value=!0)}function g(){s.value=!1}function U(){t("openAutoFocus")}function W(){t("closeAutoFocus")}function _(n){var i;((i=n.detail)==null?void 0:i.focusReason)==="pointer"&&n.preventDefault()}e.lockScroll&&fe(s);function Z(){e.closeOnPressEscape&&b()}return w(()=>e.modelValue,n=>{n?(d.value=!1,E(),m.value=!0,p.value=e.zIndex?p.value++:u(),ee(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):s.value&&C()}),w(()=>e.fullscreen,n=>{!o.value||(n?(c=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=c)}),oe(()=>{e.modelValue&&(s.value=!0,m.value=!0,E())}),{afterEnter:V,afterLeave:$,beforeLeave:H,handleClose:b,onModalClick:Y,close:C,doClose:g,onOpenAutoFocus:U,onCloseAutoFocus:W,onCloseRequested:Z,onFocusoutPrevented:_,titleId:l,bodyId:r,closed:d,style:A,overlayDialogStyle:L,rendered:m,visible:s,zIndex:p}};export{Oe as E,Se as a,Pe as b,Te as c,Ce as d,ye as e,Ie as u};
