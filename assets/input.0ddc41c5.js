import{b4 as De,aB as ie,aK as We,m as h,b5 as He,W as Ke,r as R,z as je,A as Ue,O as ee,Y as te,d as $e,aF as _e,y as Xe,v as Ye,x as Ge,B as xe,Q as ae,h as ne,X as W,n as Je,t as Qe,a9 as Ze,aa as qe,o as m,c as E,H as y,F as oe,G as b,i as t,C as X,g as L,D as k,w as H,E as Y,P as se,a as et,an as tt,aw as at,a7 as G,I as nt,J as ot,$ as we,M as st}from"./index.54492493.js";import{a as rt}from"./index.d4a0575f.js";import{i as Se,V as it,y as lt,A as ut,E as K,e as dt}from"./index.46ad6237.js";import{a as Ie,c as ct}from"./types.d6921ee2.js";import{m as pt}from"./typescript.72bf8adc.js";import{U as le}from"./index.4cd6e12d.js";import{a as ft,b as vt}from"./button.9aa832be.js";import{d as Ce}from"./error.7e8331f1.js";import{i as mt}from"./SvgIcon.eb9c95a0.js";var ht=/\s/;function yt(a){for(var r=a.length;r--&&ht.test(a.charAt(r)););return r}var gt=/^\s+/;function bt(a){return a&&a.slice(0,yt(a)+1).replace(gt,"")}var Ee=0/0,xt=/^[-+]0x[0-9a-f]+$/i,wt=/^0b[01]+$/i,St=/^0o[0-7]+$/i,It=parseInt;function Te(a){if(typeof a=="number")return a;if(De(a))return Ee;if(ie(a)){var r=typeof a.valueOf=="function"?a.valueOf():a;a=ie(r)?r+"":r}if(typeof a!="string")return a===0?a:+a;a=bt(a);var o=wt.test(a);return o||St.test(a)?It(a.slice(2),o?2:8):xt.test(a)?Ee:+a}var Ct=function(){return We.Date.now()},re=Ct,Et="Expected a function",Tt=Math.max,kt=Math.min;function qt(a,r,o){var n,i,p,l,d,u,v=0,w=!1,g=!1,I=!0;if(typeof a!="function")throw new TypeError(Et);r=Te(r)||0,ie(o)&&(w=!!o.leading,g="maxWait"in o,p=g?Tt(Te(o.maxWait)||0,r):p,I="trailing"in o?!!o.trailing:I);function s(f){var x=n,$=i;return n=i=void 0,v=f,l=a.apply($,x),l}function j(f){return v=f,d=setTimeout(C,r),w?s(f):l}function F(f){var x=f-u,$=f-v,z=r-x;return g?kt(z,p-$):z}function T(f){var x=f-u,$=f-v;return u===void 0||x>=r||x<0||g&&$>=p}function C(){var f=re();if(T(f))return M(f);d=setTimeout(C,F(f))}function M(f){return d=void 0,I&&n?s(f):(n=i=void 0,l)}function N(){d!==void 0&&clearTimeout(d),v=0,n=u=i=d=void 0}function A(){return d===void 0?l:M(re())}function B(){var f=re(),x=T(f);if(n=arguments,i=this,u=f,x){if(d===void 0)return j(u);if(g)return clearTimeout(d),d=setTimeout(C,r),s(u)}return d===void 0&&(d=setTimeout(C,r)),l}return B.cancel=N,B.flush=A,B}const $t=a=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(a),zt=["class","style"],Pt=/^on[A-Z]/,Nt=(a={})=>{const{excludeListeners:r=!1,excludeKeys:o}=a,n=h(()=>((o==null?void 0:o.value)||[]).concat(zt)),i=Ke();return i?h(()=>{var p;return He(Object.entries((p=i.proxy)==null?void 0:p.$attrs).filter(([l])=>!n.value.includes(l)&&!(r&&Pt.test(l))))}):h(()=>({}))};function Vt(a){const r=R();function o(){if(a.value==null)return;const{selectionStart:i,selectionEnd:p,value:l}=a.value;if(i==null||p==null)return;const d=l.slice(0,Math.max(0,i)),u=l.slice(Math.max(0,p));r.value={selectionStart:i,selectionEnd:p,value:l,beforeTxt:d,afterTxt:u}}function n(){if(a.value==null||r.value==null)return;const{value:i}=a.value,{beforeTxt:p,afterTxt:l,selectionStart:d}=r.value;if(p==null||l==null||d==null)return;let u=i.length;if(i.endsWith(l))u=i.length-l.length;else if(i.startsWith(p))u=p.length;else{const v=p[d-1],w=i.indexOf(v,d-1);w!==-1&&(u=w+1)}a.value.setSelectionRange(u,u)}return[o,n]}let S;const Ft=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Mt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function At(a){const r=window.getComputedStyle(a),o=r.getPropertyValue("box-sizing"),n=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),i=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:Mt.map(l=>`${l}:${r.getPropertyValue(l)}`).join(";"),paddingSize:n,borderSize:i,boxSizing:o}}function ke(a,r=1,o){var n;S||(S=document.createElement("textarea"),document.body.appendChild(S));const{paddingSize:i,borderSize:p,boxSizing:l,contextStyle:d}=At(a);S.setAttribute("style",`${d};${Ft}`),S.value=a.value||a.placeholder||"";let u=S.scrollHeight;const v={};l==="border-box"?u=u+p:l==="content-box"&&(u=u-i),S.value="";const w=S.scrollHeight-i;if(Ie(r)){let g=w*r;l==="border-box"&&(g=g+i+p),u=Math.max(g,u),v.minHeight=`${g}px`}if(Ie(o)){let g=w*o;l==="border-box"&&(g=g+i+p),u=Math.min(g,u)}return v.height=`${u}px`,(n=S.parentNode)==null||n.removeChild(S),S=void 0,v}const Bt=je({id:{type:String,default:void 0},size:Ue,disabled:Boolean,modelValue:{type:ee([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ee([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Se},prefixIcon:{type:Se},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ee([Object,Array,String]),default:()=>pt({})}}),Ot={[le]:a=>te(a),input:a=>te(a),change:a=>te(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},Lt=["role"],Rt=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Dt=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],Wt=$e({name:"ElInput",inheritAttrs:!1}),Ht=$e({...Wt,props:Bt,emits:Ot,setup(a,{expose:r,emit:o}){const n=a,i=_e(),p=Xe(),l=h(()=>{const e={};return n.containerRole==="combobox"&&(e["aria-haspopup"]=i["aria-haspopup"],e["aria-owns"]=i["aria-owns"],e["aria-expanded"]=i["aria-expanded"]),e}),d=Nt({excludeKeys:h(()=>Object.keys(l.value))}),{form:u,formItem:v}=ft(),{inputId:w}=vt(n,{formItemContext:v}),g=Ye(),I=Ge(),s=xe("input"),j=xe("textarea"),F=ae(),T=ae(),C=R(!1),M=R(!1),N=R(!1),A=R(!1),B=R(),f=ae(n.inputStyle),x=h(()=>F.value||T.value),$=h(()=>{var e;return(e=u==null?void 0:u.statusIcon)!=null?e:!1}),z=h(()=>(v==null?void 0:v.validateState)||""),ue=h(()=>z.value&&it[z.value]),ze=h(()=>A.value?lt:ut),Pe=h(()=>[i.style,n.inputStyle]),de=h(()=>[n.inputStyle,f.value,{resize:n.resize}]),P=h(()=>mt(n.modelValue)?"":String(n.modelValue)),U=h(()=>n.clearable&&!I.value&&!n.readonly&&!!P.value&&(C.value||M.value)),J=h(()=>n.showPassword&&!I.value&&!n.readonly&&!!P.value&&(!!P.value||C.value)),O=h(()=>n.showWordLimit&&!!d.value.maxlength&&(n.type==="text"||n.type==="textarea")&&!I.value&&!n.readonly&&!n.showPassword),Q=h(()=>Array.from(P.value).length),Ne=h(()=>!!O.value&&Q.value>Number(d.value.maxlength)),Ve=h(()=>!!p.suffix||!!n.suffixIcon||U.value||n.showPassword||O.value||!!z.value&&$.value),[Fe,Me]=Vt(F);rt(T,e=>{if(!O.value||n.resize!=="both")return;const c=e[0],{width:V}=c.contentRect;B.value={right:`calc(100% - ${V+15+6}px)`}});const _=()=>{const{type:e,autosize:c}=n;if(!(!ct||e!=="textarea"))if(c){const V=we(c)?c.minRows:void 0,q=we(c)?c.maxRows:void 0;f.value={...ke(T.value,V,q)}}else f.value={minHeight:ke(T.value).minHeight}},D=()=>{const e=x.value;!e||e.value===P.value||(e.value=P.value)},Z=async e=>{Fe();let{value:c}=e.target;if(n.formatter&&(c=n.parser?n.parser(c):c,c=n.formatter(c)),!N.value){if(c===P.value){D();return}o(le,c),o("input",c),await W(),D(),Me()}},ce=e=>{o("change",e.target.value)},pe=e=>{o("compositionstart",e),N.value=!0},fe=e=>{var c;o("compositionupdate",e);const V=(c=e.target)==null?void 0:c.value,q=V[V.length-1]||"";N.value=!$t(q)},ve=e=>{o("compositionend",e),N.value&&(N.value=!1,Z(e))},Ae=()=>{A.value=!A.value,me()},me=async()=>{var e;await W(),(e=x.value)==null||e.focus()},Be=()=>{var e;return(e=x.value)==null?void 0:e.blur()},he=e=>{C.value=!0,o("focus",e)},ye=e=>{var c;C.value=!1,o("blur",e),n.validateEvent&&((c=v==null?void 0:v.validate)==null||c.call(v,"blur").catch(V=>Ce()))},Oe=e=>{M.value=!1,o("mouseleave",e)},Le=e=>{M.value=!0,o("mouseenter",e)},ge=e=>{o("keydown",e)},Re=()=>{var e;(e=x.value)==null||e.select()},be=()=>{o(le,""),o("change",""),o("clear"),o("input","")};return ne(()=>n.modelValue,()=>{var e;W(()=>_()),n.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"change").catch(c=>Ce()))}),ne(P,()=>D()),ne(()=>n.type,async()=>{await W(),D(),_()}),Je(()=>{!n.formatter&&n.parser,D(),W(_)}),r({input:F,textarea:T,ref:x,textareaStyle:de,autosize:Qe(n,"autosize"),focus:me,blur:Be,select:Re,clear:be,resizeTextarea:_}),(e,c)=>Ze((m(),E("div",se(t(l),{class:[e.type==="textarea"?t(j).b():t(s).b(),t(s).m(t(g)),t(s).is("disabled",t(I)),t(s).is("exceed",t(Ne)),{[t(s).b("group")]:e.$slots.prepend||e.$slots.append,[t(s).bm("group","append")]:e.$slots.append,[t(s).bm("group","prepend")]:e.$slots.prepend,[t(s).m("prefix")]:e.$slots.prefix||e.prefixIcon,[t(s).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[t(s).bm("suffix","password-clear")]:t(U)&&t(J)},e.$attrs.class],style:t(Pe),role:e.containerRole,onMouseenter:Le,onMouseleave:Oe}),[y(" input "),e.type!=="textarea"?(m(),E(oe,{key:0},[y(" prepend slot "),e.$slots.prepend?(m(),E("div",{key:0,class:b(t(s).be("group","prepend"))},[X(e.$slots,"prepend")],2)):y("v-if",!0),L("div",{class:b([t(s).e("wrapper"),t(s).is("focus",C.value)])},[y(" prefix slot "),e.$slots.prefix||e.prefixIcon?(m(),E("span",{key:0,class:b(t(s).e("prefix"))},[L("span",{class:b(t(s).e("prefix-inner"))},[X(e.$slots,"prefix"),e.prefixIcon?(m(),k(t(K),{key:0,class:b(t(s).e("icon"))},{default:H(()=>[(m(),k(Y(e.prefixIcon)))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0),L("input",se({id:t(w),ref_key:"input",ref:F,class:t(s).e("inner")},t(d),{type:e.showPassword?A.value?"text":"password":e.type,disabled:t(I),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:n.form,onCompositionstart:pe,onCompositionupdate:fe,onCompositionend:ve,onInput:Z,onFocus:he,onBlur:ye,onChange:ce,onKeydown:ge}),null,16,Rt),y(" suffix slot "),t(Ve)?(m(),E("span",{key:1,class:b(t(s).e("suffix"))},[L("span",{class:b(t(s).e("suffix-inner"))},[!t(U)||!t(J)||!t(O)?(m(),E(oe,{key:0},[X(e.$slots,"suffix"),e.suffixIcon?(m(),k(t(K),{key:0,class:b(t(s).e("icon"))},{default:H(()=>[(m(),k(Y(e.suffixIcon)))]),_:1},8,["class"])):y("v-if",!0)],64)):y("v-if",!0),t(U)?(m(),k(t(K),{key:1,class:b([t(s).e("icon"),t(s).e("clear")]),onMousedown:tt(t(at),["prevent"]),onClick:be},{default:H(()=>[et(t(dt))]),_:1},8,["class","onMousedown"])):y("v-if",!0),t(J)?(m(),k(t(K),{key:2,class:b([t(s).e("icon"),t(s).e("password")]),onClick:Ae},{default:H(()=>[(m(),k(Y(t(ze))))]),_:1},8,["class"])):y("v-if",!0),t(O)?(m(),E("span",{key:3,class:b(t(s).e("count"))},[L("span",{class:b(t(s).e("count-inner"))},G(t(Q))+" / "+G(t(d).maxlength),3)],2)):y("v-if",!0),t(z)&&t(ue)&&t($)?(m(),k(t(K),{key:4,class:b([t(s).e("icon"),t(s).e("validateIcon"),t(s).is("loading",t(z)==="validating")])},{default:H(()=>[(m(),k(Y(t(ue))))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0)],2),y(" append slot "),e.$slots.append?(m(),E("div",{key:1,class:b(t(s).be("group","append"))},[X(e.$slots,"append")],2)):y("v-if",!0)],64)):(m(),E(oe,{key:1},[y(" textarea "),L("textarea",se({id:t(w),ref_key:"textarea",ref:T,class:t(j).e("inner")},t(d),{tabindex:e.tabindex,disabled:t(I),readonly:e.readonly,autocomplete:e.autocomplete,style:t(de),"aria-label":e.label,placeholder:e.placeholder,form:n.form,onCompositionstart:pe,onCompositionupdate:fe,onCompositionend:ve,onInput:Z,onFocus:he,onBlur:ye,onChange:ce,onKeydown:ge}),null,16,Dt),t(O)?(m(),E("span",{key:0,style:nt(B.value),class:b(t(s).e("count"))},G(t(Q))+" / "+G(t(d).maxlength),7)):y("v-if",!0)],64))],16,Lt)),[[qe,e.type!=="hidden"]])}});var Kt=ot(Ht,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const ea=st(Kt);export{ea as E,qt as d,$t as i,Nt as u};
