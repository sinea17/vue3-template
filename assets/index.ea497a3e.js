import{z as fa,O as $e,aw as va,Y as Se,$ as ga,d as he,aF as ma,x as ha,B as Ma,r as L,m as Z,n as Aa,o as Q,D as ze,w as P,g as I,G as ne,i as h,I as Ve,a as D,c as ue,F as He,a4 as ba,C as ee,b as te,a7 as V,P as wa,aE as ae,an as Ne,at as ya,J as Ea,X as _a,Z as Be,M as Ca,aC as Sa,_ as Ba,Q as Ia,L as re,h as Ie,as as de,a3 as Pa}from"./index.54492493.js";import{_ as Ga}from"./Dialog.92ef01bb.js";import{E as Xe}from"./button.9aa832be.js";import{u as La,d as Da,E as Fa}from"./input.0ddc41c5.js";import{E as Ua}from"./scrollbar.16e15430.js";import{u as ka,g as $a,E as Va}from"./popper.a18e3051.js";import{E as Na}from"./message.0b764d15.js";import{o as Wa}from"./index.d4a0575f.js";import{E as Oa,l as Ja}from"./index.46ad6237.js";import{U as ie,I as Pe,C as Ze}from"./index.4cd6e12d.js";import{t as qa}from"./error.7e8331f1.js";import"./overlay.0b089a63.js";import"./vnode.f3aec397.js";import"./types.d6921ee2.js";import"./index.c34b986f.js";import"./index.3d6fd070.js";import"./style.58fc1a9e.js";import"./SvgIcon.eb9c95a0.js";import"./typescript.72bf8adc.js";const ja=fa({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:$e(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:$e([Function,Array]),default:va},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:ka.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1}}),Ka={[ie]:e=>Se(e),[Pe]:e=>Se(e),[Ze]:e=>Se(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>ga(e)},Ta=["aria-expanded","aria-owns"],za={key:0},Ha=["id","aria-selected","onClick"],Qe="ElAutocomplete",Xa=he({name:Qe,inheritAttrs:!1}),Za=he({...Xa,props:ja,emits:Ka,setup(e,{expose:s,emit:a}){const t=e,o=La(),n=ma(),l=ha(),d=Ma("autocomplete"),i=L(),A=L(),_=L(),u=L();let b=!1,m=!1;const f=L([]),v=L(-1),S=L(""),M=L(!1),r=L(!1),p=L(!1),g=Z(()=>d.b(String($a()))),w=Z(()=>n.style),C=Z(()=>(f.value.length>0||p.value)&&M.value),y=Z(()=>!t.hideLoading&&p.value),N=Z(()=>i.value?Array.from(i.value.$el.querySelectorAll("input")):[]),$=async()=>{await _a(),C.value&&(S.value=`${i.value.$el.offsetWidth}px`)},be=()=>{m=!0},we=()=>{m=!1,v.value=-1},Fe=Da(async c=>{if(r.value)return;const B=U=>{p.value=!1,!r.value&&(Be(U)?(f.value=U,v.value=t.highlightFirstItem?0:-1):qa(Qe,"autocomplete suggestions must be an array"))};if(p.value=!0,Be(t.fetchSuggestions))B(t.fetchSuggestions);else{const U=await t.fetchSuggestions(c,B);Be(U)&&B(U)}},t.debounce),na=c=>{const B=!!c;if(a(Pe,c),a(ie,c),r.value=!1,M.value||(M.value=B),!t.triggerOnFocus&&!c){r.value=!0,f.value=[];return}Fe(c)},la=c=>{var B;l.value||(((B=c.target)==null?void 0:B.tagName)!=="INPUT"||N.value.includes(document.activeElement))&&(M.value=!0)},sa=c=>{a(Ze,c)},ua=c=>{m||(M.value=!0,a("focus",c),t.triggerOnFocus&&!b&&Fe(String(t.modelValue)))},ra=c=>{m||a("blur",c)},ia=()=>{M.value=!1,a(ie,""),a("clear")},Ue=async()=>{C.value&&v.value>=0&&v.value<f.value.length?ye(f.value[v.value]):t.selectWhenUnmatched&&(a("select",{value:t.modelValue}),f.value=[],v.value=-1)},da=c=>{C.value&&(c.preventDefault(),c.stopPropagation(),oe())},oe=()=>{M.value=!1},ca=()=>{var c;(c=i.value)==null||c.focus()},pa=()=>{var c;(c=i.value)==null||c.blur()},ye=async c=>{a(Pe,c[t.valueKey]),a(ie,c[t.valueKey]),a("select",c),f.value=[],v.value=-1},Ee=c=>{if(!C.value||p.value)return;if(c<0){v.value=-1;return}c>=f.value.length&&(c=f.value.length-1);const B=A.value.querySelector(`.${d.be("suggestion","wrap")}`),q=B.querySelectorAll(`.${d.be("suggestion","list")} li`)[c],_e=B.scrollTop,{offsetTop:ke,scrollHeight:Ce}=q;ke+Ce>_e+B.clientHeight&&(B.scrollTop+=Ce),ke<_e&&(B.scrollTop-=Ce),v.value=c,i.value.ref.setAttribute("aria-activedescendant",`${g.value}-item-${v.value}`)};return Wa(u,()=>{C.value&&oe()}),Aa(()=>{i.value.ref.setAttribute("role","textbox"),i.value.ref.setAttribute("aria-autocomplete","list"),i.value.ref.setAttribute("aria-controls","id"),i.value.ref.setAttribute("aria-activedescendant",`${g.value}-item-${v.value}`),b=i.value.ref.hasAttribute("readonly")}),s({highlightedIndex:v,activated:M,loading:p,inputRef:i,popperRef:_,suggestions:f,handleSelect:ye,handleKeyEnter:Ue,focus:ca,blur:pa,close:oe,highlight:Ee}),(c,B)=>(Q(),ze(h(Va),{ref_key:"popperRef",ref:_,visible:h(C),placement:c.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[h(d).e("popper"),c.popperClass],teleported:c.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${h(d).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:$,onShow:be,onHide:we},{content:P(()=>[I("div",{ref_key:"regionRef",ref:A,class:ne([h(d).b("suggestion"),h(d).is("loading",h(y))]),style:Ve({[c.fitInputWidth?"width":"minWidth"]:S.value,outline:"none"}),role:"region"},[D(h(Ua),{id:h(g),tag:"ul","wrap-class":h(d).be("suggestion","wrap"),"view-class":h(d).be("suggestion","list"),role:"listbox"},{default:P(()=>[h(y)?(Q(),ue("li",za,[D(h(Oa),{class:ne(h(d).is("loading"))},{default:P(()=>[D(h(Ja))]),_:1},8,["class"])])):(Q(!0),ue(He,{key:1},ba(f.value,(U,q)=>(Q(),ue("li",{id:`${h(g)}-item-${q}`,key:q,class:ne({highlighted:v.value===q}),role:"option","aria-selected":v.value===q,onClick:_e=>ye(U)},[ee(c.$slots,"default",{item:U},()=>[te(V(U[c.valueKey]),1)])],10,Ha))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:P(()=>[I("div",{ref_key:"listboxRef",ref:u,class:ne([h(d).b(),c.$attrs.class]),style:Ve(h(w)),role:"combobox","aria-haspopup":"listbox","aria-expanded":h(C),"aria-owns":h(g)},[D(h(Fa),wa({ref_key:"inputRef",ref:i},h(o),{"model-value":c.modelValue,onInput:na,onChange:sa,onFocus:ua,onBlur:ra,onClear:ia,onKeydown:[B[0]||(B[0]=ae(Ne(U=>Ee(v.value-1),["prevent"]),["up"])),B[1]||(B[1]=ae(Ne(U=>Ee(v.value+1),["prevent"]),["down"])),ae(Ue,["enter"]),ae(oe,["tab"]),ae(da,["esc"])],onMousedown:la}),ya({_:2},[c.$slots.prepend?{name:"prepend",fn:P(()=>[ee(c.$slots,"prepend")])}:void 0,c.$slots.append?{name:"append",fn:P(()=>[ee(c.$slots,"append")])}:void 0,c.$slots.prefix?{name:"prefix",fn:P(()=>[ee(c.$slots,"prefix")])}:void 0,c.$slots.suffix?{name:"suffix",fn:P(()=>[ee(c.$slots,"suffix")])}:void 0]),1040,["model-value","onKeydown"])],14,Ta)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var Qa=Ea(Za,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]);const Ya=Ca(Qa);var Ye={exports:{}};(function(e,s){(function(a,t){e.exports=t()})(Sa,function(){function a(u){var b=[];return u.AMapUI&&b.push(t(u.AMapUI)),u.Loca&&b.push(o(u.Loca)),Promise.all(b)}function t(u){return new Promise(function(b,m){var f=[];if(u.plugins)for(var v=0;v<u.plugins.length;v+=1)l.AMapUI.plugins.indexOf(u.plugins[v])==-1&&f.push(u.plugins[v]);if(d.AMapUI===n.failed)m("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(d.AMapUI===n.notload){d.AMapUI=n.loading,l.AMapUI.version=u.version||l.AMapUI.version,v=l.AMapUI.version;var S=document.body||document.head,M=document.createElement("script");M.type="text/javascript",M.src="https://webapi.amap.com/ui/"+v+"/main.js",M.onerror=function(r){d.AMapUI=n.failed,m("\u8BF7\u6C42 AMapUI \u5931\u8D25")},M.onload=function(){if(d.AMapUI=n.loaded,f.length)window.AMapUI.loadUI(f,function(){for(var r=0,p=f.length;r<p;r++){var g=f[r].split("/").slice(-1)[0];window.AMapUI[g]=arguments[r]}for(b();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()});else for(b();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()},S.appendChild(M)}else d.AMapUI===n.loaded?u.version&&u.version!==l.AMapUI.version?m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):f.length?window.AMapUI.loadUI(f,function(){for(var r=0,p=f.length;r<p;r++){var g=f[r].split("/").slice(-1)[0];window.AMapUI[g]=arguments[r]}b()}):b():u.version&&u.version!==l.AMapUI.version?m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):i.AMapUI.push(function(r){r?m(r):f.length?window.AMapUI.loadUI(f,function(){for(var p=0,g=f.length;p<g;p++){var w=f[p].split("/").slice(-1)[0];window.AMapUI[w]=arguments[p]}b()}):b()})})}function o(u){return new Promise(function(b,m){if(d.Loca===n.failed)m("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(d.Loca===n.notload){d.Loca=n.loading,l.Loca.version=u.version||l.Loca.version;var f=l.Loca.version,v=l.AMap.version.startsWith("2"),S=f.startsWith("2");if(v&&!S||!v&&S)m("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{v=l.key,S=document.body||document.head;var M=document.createElement("script");M.type="text/javascript",M.src="https://webapi.amap.com/loca?v="+f+"&key="+v,M.onerror=function(r){d.Loca=n.failed,m("\u8BF7\u6C42 AMapUI \u5931\u8D25")},M.onload=function(){for(d.Loca=n.loaded,b();i.Loca.length;)i.Loca.splice(0,1)[0]()},S.appendChild(M)}}else d.Loca===n.loaded?u.version&&u.version!==l.Loca.version?m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):b():u.version&&u.version!==l.Loca.version?m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):i.Loca.push(function(r){r?m(r):m()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var n;(function(u){u.notload="notload",u.loading="loading",u.loaded="loaded",u.failed="failed"})(n||(n={}));var l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},d={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},i={AMap:[],AMapUI:[],Loca:[]},A=[],_=function(u){typeof u=="function"&&(d.AMap===n.loaded?u(window.AMap):A.push(u))};return{load:function(u){return new Promise(function(b,m){if(d.AMap==n.failed)m("");else if(d.AMap==n.notload){var f=u.key,v=u.version,S=u.plugins;f?(window.AMap&&location.host!=="lbs.amap.com"&&m("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),l.key=f,l.AMap.version=v||l.AMap.version,l.AMap.plugins=S||l.AMap.plugins,d.AMap=n.loading,v=document.body||document.head,window.___onAPILoaded=function(r){if(delete window.___onAPILoaded,r)d.AMap=n.failed,m(r);else for(d.AMap=n.loaded,a(u).then(function(){b(window.AMap)}).catch(m);A.length;)A.splice(0,1)[0]()},S=document.createElement("script"),S.type="text/javascript",S.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+l.AMap.version+"&key="+f+"&plugin="+l.AMap.plugins.join(","),S.onerror=function(r){d.AMap=n.failed,m(r)},v.appendChild(S)):m("\u8BF7\u586B\u5199key")}else if(d.AMap==n.loaded)if(u.key&&u.key!==l.key)m("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(u.version&&u.version!==l.AMap.version)m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(f=[],u.plugins)for(v=0;v<u.plugins.length;v+=1)l.AMap.plugins.indexOf(u.plugins[v])==-1&&f.push(u.plugins[v]);f.length?window.AMap.plugin(f,function(){a(u).then(function(){b(window.AMap)}).catch(m)}):a(u).then(function(){b(window.AMap)}).catch(m)}else if(u.key&&u.key!==l.key)m("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(u.version&&u.version!==l.AMap.version)m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var M=[];if(u.plugins)for(v=0;v<u.plugins.length;v+=1)l.AMap.plugins.indexOf(u.plugins[v])==-1&&M.push(u.plugins[v]);_(function(){M.length?window.AMap.plugin(M,function(){a(u).then(function(){b(window.AMap)}).catch(m)}):a(u).then(function(){b(window.AMap)}).catch(m)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},d={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},i={AMap:[],AMapUI:[],Loca:[]}}}})})(Ye);var Ra=Ye.exports;/* @preserve
 * gcoord 0.3.2, geographic coordinate library
 * Copyright (c) 2021 Jiulong Hu <me@hujiulong.com>
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ce=function(){return ce=Object.assign||function(s){for(var a,t=1,o=arguments.length;t<o;t++){a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s[n]=a[n])}return s},ce.apply(this,arguments)},F=Math.sin,xa=Math.cos,Le=Math.sqrt,pe=Math.abs,G=Math.PI,We=6378245,Oe=.006693421622965823;function Re(e,s){return e>=72.004&&e<=137.8347&&s>=.8293&&s<=55.8271}function et(e,s){var a=-100+2*e+3*s+.2*s*s+.1*e*s+.2*Le(pe(e));return a+=(20*F(6*e*G)+20*F(2*e*G))*2/3,a+=(20*F(s*G)+40*F(s/3*G))*2/3,a+=(160*F(s/12*G)+320*F(s*G/30))*2/3,a}function at(e,s){var a=300+e+2*s+.1*e*e+.1*e*s+.1*Le(pe(e));return a+=(20*F(6*e*G)+20*F(2*e*G))*2/3,a+=(20*F(e*G)+40*F(e/3*G))*2/3,a+=(150*F(e/12*G)+300*F(e/30*G))*2/3,a}function tt(e,s){var a=at(e-105,s-35),t=et(e-105,s-35),o=s/180*G,n=F(o);n=1-Oe*n*n;var l=Le(n);return a=a*180/(We/l*xa(o)*G),t=t*180/(We*(1-Oe)/(n*l)*G),[a,t]}function J(e){var s=e[0],a=e[1];if(!Re(s,a))return[s,a];var t=tt(s,a);return[s+t[0],a+t[1]]}function R(e){var s=e[0],a=e[1];if(!Re(s,a))return[s,a];for(var t=[s,a],o=t[0],n=t[1],l=J([o,n]),d=l[0]-s,i=l[1]-a;pe(d)>1e-6||pe(i)>1e-6;)o-=d,n-=i,l=J([o,n]),d=l[0]-s,i=l[1]-a;return[o,n]}var fe=Math.sin,ve=Math.cos,xe=Math.atan2,ea=Math.sqrt,ot=Math.PI,ge=ot*3e3/180;function Y(e){var s=e[0],a=e[1],t=s-.0065,o=a-.006,n=ea(t*t+o*o)-2e-5*fe(o*ge),l=xe(o,t)-3e-6*ve(t*ge),d=n*ve(l),i=n*fe(l);return[d,i]}function x(e){var s=e[0],a=e[1],t=s,o=a,n=ea(t*t+o*o)+2e-5*fe(o*ge),l=xe(o,t)+3e-6*ve(t*ge),d=n*ve(l)+.0065,i=n*fe(l)+.006;return[d,i]}var Je=180/Math.PI,qe=Math.PI/180,me=6378137,W=20037508342789244e-9;function le(e){return[e[0]*Je/me,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/me)))*Je]}function Me(e){var s=Math.abs(e[0])<=180?e[0]:e[0]-(e[0]<0?-1:1)*360,a=[me*s*qe,me*Math.log(Math.tan(Math.PI*.25+.5*e[1]*qe))];return a[0]>W&&(a[0]=W),a[0]<-W&&(a[0]=-W),a[1]>W&&(a[1]=W),a[1]<-W&&(a[1]=-W),a}var Ge=Math.abs,je=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],Ke=[75,60,45,30,15,0],nt=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],lt=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function aa(e,s,a){var t=Ge(s)/a[9],o=a[0]+a[1]*Ge(e),n=a[2]+a[3]*t+a[4]*Math.pow(t,2)+a[5]*Math.pow(t,3)+a[6]*Math.pow(t,4)+a[7]*Math.pow(t,5)+a[8]*Math.pow(t,6);return o*=e<0?-1:1,n*=s<0?-1:1,[o,n]}function Ae(e){for(var s=e[0],a=e[1],t=[],o=0;o<Ke.length;o++)if(Ge(a)>Ke[o]){t=lt[o];break}return aa(s,a,t)}function se(e){for(var s=e[0],a=e[1],t=[],o=0;o<je.length;o++)if(a>=je[o]){t=nt[o];break}return aa(s,a,t)}function O(e,s){if(!e)throw new Error(s)}function ta(e){return!!e&&Object.prototype.toString.call(e)==="[object Array]"}function Te(e){return!isNaN(Number(e))&&e!==null&&!ta(e)}function k(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];var a=e.length-1;return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];for(var n=a,l=e[a].apply(null,t);n--;)l=e[n].call(null,l);return l}}function oa(e,s,a){if(a===void 0&&(a=!1),e!==null)for(var t,o,n,l,d,i,A,_=0,u=0,b,m=e.type,f=m==="FeatureCollection",v=m==="Feature",S=f?e.features.length:1,M=0;M<S;M++){A=f?e.features[M].geometry:v?e.geometry:e,b=A?A.type==="GeometryCollection":!1,d=b?A.geometries.length:1;for(var r=0;r<d;r++){var p=0,g=0;if(l=b?A.geometries[r]:A,l!==null){var w=l.type;switch(_=a&&(w==="Polygon"||w==="MultiPolygon")?1:0,w){case null:break;case"Point":if(i=l.coordinates,s(i,u,M,p,g)===!1)return!1;u++,p++;break;case"LineString":case"MultiPoint":for(i=l.coordinates,t=0;t<i.length;t++){if(s(i[t],u,M,p,g)===!1)return!1;u++,w==="MultiPoint"&&p++}w==="LineString"&&p++;break;case"Polygon":case"MultiLineString":for(i=l.coordinates,t=0;t<i.length;t++){for(o=0;o<i[t].length-_;o++){if(s(i[t][o],u,M,p,g)===!1)return!1;u++}w==="MultiLineString"&&p++,w==="Polygon"&&g++}w==="Polygon"&&p++;break;case"MultiPolygon":for(i=l.coordinates,t=0;t<i.length;t++){for(g=0,o=0;o<i[t].length;o++){for(n=0;n<i[t][o].length-_;n++){if(s(i[t][o][n],u,M,p,g)===!1)return!1;u++}g++}p++}break;case"GeometryCollection":for(t=0;t<l.geometries.length;t++)if(oa(l.geometries[t],s,a)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var j,K,T,z,H,E;(function(e){e.WGS84="WGS84",e.WGS1984="WGS84",e.EPSG4326="WGS84",e.GCJ02="GCJ02",e.AMap="GCJ02",e.BD09="BD09",e.BD09LL="BD09",e.Baidu="BD09",e.BMap="BD09",e.BD09MC="BD09MC",e.BD09Meter="BD09MC",e.EPSG3857="EPSG3857",e.EPSG900913="EPSG3857",e.EPSG102100="EPSG3857",e.WebMercator="EPSG3857",e.WM="EPSG3857"})(E||(E={}));var st={to:(j={},j[E.GCJ02]=J,j[E.BD09]=k(x,J),j[E.BD09MC]=k(Ae,x,J),j[E.EPSG3857]=Me,j)},ut={to:(K={},K[E.WGS84]=R,K[E.BD09]=x,K[E.BD09MC]=k(Ae,x),K[E.EPSG3857]=k(Me,R),K)},rt={to:(T={},T[E.WGS84]=k(R,Y),T[E.GCJ02]=Y,T[E.EPSG3857]=k(Me,R,Y),T[E.BD09MC]=Ae,T)},it={to:(z={},z[E.WGS84]=le,z[E.GCJ02]=k(J,le),z[E.BD09]=k(x,J,le),z[E.BD09MC]=k(Ae,x,J,le),z)},dt={to:(H={},H[E.WGS84]=k(R,Y,se),H[E.GCJ02]=k(Y,se),H[E.EPSG3857]=k(Me,R,Y,se),H[E.BD09]=se,H)},ct={WGS84:st,GCJ02:ut,BD09:rt,EPSG3857:it,BD09MC:dt};function pt(e,s,a){if(O(!!e,"The args[0] input coordinate is required"),O(!!s,"The args[1] original coordinate system is required"),O(!!a,"The args[2] target coordinate system is required"),s===a)return e;var t=ct[s];O(!!t,"Invalid original coordinate system: "+s);var o=t.to[a];O(!!o,"Invalid target coordinate system: "+a);var n=typeof e;if(O(n==="string"||n==="object","Invalid input coordinate type: "+n),n==="string")try{e=JSON.parse(e)}catch{throw new Error("Invalid input coordinate: "+e)}var l=!1;ta(e)&&(O(e.length>=2,"Invalid input coordinate: "+e),O(Te(e[0])&&Te(e[1]),"Invalid input coordinate: "+e),e=e.map(Number),l=!0);var d=o;return l?d(e):(oa(e,function(i){var A;A=d(i),i[0]=A[0],i[1]=A[1]}),e)}var ft=ce(ce({},E),{CRSTypes:E,transform:pt}),X=ft;const vt={class:"map-panel"},gt=["id"],mt={class:"search-box"},ht={class:"address-text","data-text":"\u5730\u6807\u540D\u79F0\uFF1A"},Mt={class:"address-text","data-text":"\u8BE6\u7EC6\u5730\u5740\uFF1A"},At=he({__name:"MapChoose",props:{modelValue:{type:Boolean,default:!1},location:null,mapId:{default:"map"}},emits:["update:modelValue","confirm"],setup(e,{emit:s}){const a=e,t=Ia(null),o=re({longitude:0,latitude:0,address:"",name:""}),n=L("");let l,d,i,A;Ie(o,r=>{r.longitude&&r.latitude&&S()}),Ie(()=>a.modelValue,r=>{r?u():(n.value="",o.longitude=0,o.latitude=0,o.address="",o.name="")}),Ie(()=>n.value,r=>{r||l.clear()});const _=Z({get(){return a.modelValue},set(r){s("update:modelValue",r)}});function u(){Ra.load({key:"e45f179a1d2b4cef5041d2f16cc4d1b3",version:"2.0"}).then(async r=>{d=r,t.value=new r.Map(a.mapId);let p=!1;if(t.value.on("click",g=>m(g,p)),t.value.on("hotspotclick",g=>f(g)),t.value.on("hotspotover",()=>{p=!0}),t.value.on("hotspotout",()=>{p=!1}),a.location){let g=await X.transform([a.location.longitude,a.location.latitude],X.WGS84,X.GCJ02);o.longitude=g[0],o.latitude=g[1],o.address=a.location.address,o.name=a.location.name}r.plugin(["AMap.ToolBar","AMap.Scale","AMap.Geolocation","AMap.PlaceSearch","AMap.Geocoder"],()=>{const g=new r.ToolBar,w=new r.Scale,C=new r.Geolocation({enableHighAccuracy:!0,position:"RT",zoomToAccuracy:!0,showCircle:!1});A=new r.Geocoder({city:"\u5168\u56FD"}),t.value.addControl(C),t.value.addControl(g),t.value.addControl(w),l=new r.PlaceSearch({map:t.value,city:"510100",pageSize:30,pageIndex:1,citylimit:!1,autoFitView:!0}),C.getCurrentPosition(),l.on("markerClick",y=>{console.log("\u70B9\u51FB\u641C\u7D22marker",y);const{pname:N,cityname:$,adname:be,address:we,name:De}=y.data;o.longitude=y.data.location.lng,o.latitude=y.data.location.lat,o.address=N+$+be+we,o.name=De})})})}function b(r,p){l.search(r,(g,w)=>{if(w&&typeof w=="object"&&w.poiList){const C=w.poiList.pois;C.forEach(y=>{y.value=y.name,y.label=y.name}),p(C)}else p([])})}function m(r,p){if(p)return;n.value="";const{lng:g,lat:w}=r.lnglat;A.getAddress([g,w],(C,y)=>{if(C==="complete"&&y.info==="OK"){const{addressComponent:N,formattedAddress:$}=y.regeocode;o.longitude=g,o.latitude=w,o.address=$,o.name=$}})}function f(r,p){n.value="";const{lng:g,lat:w}=r.lnglat;A.getAddress([g,w],(C,y)=>{if(C==="complete"&&y.info==="OK"){const{addressComponent:N,formattedAddress:$}=y.regeocode;o.longitude=g,o.latitude=w,o.address=$,o.name=r.name.replace(/\s/g,"")}})}function v(r){const{pname:p,cityname:g,adname:w,address:C,name:y}=r,{lng:N,lat:$}=r.location;o.longitude=N,o.latitude=$,o.address=p+g+w+C,o.name=y,t.value.setZoomAndCenter(16,[N,$])}function S(r){const{longitude:p,latitude:g}=o.longitude?o:r;i&&i.setMap(null),i=new d.Marker({position:new d.LngLat(p,g),anchor:"bottom-center"}),t.value.add(i),t.value.setZoomAndCenter(16,[p,g])}const M=async()=>{if(!o.longitude){Na.error("\u8BF7\u9009\u62E9\u5B9A\u4F4D");return}let r=await X.transform([o.longitude,o.latitude],X.GCJ02,X.WGS84);s("confirm",{...o,longitude:r[0],latitude:r[1]}),_.value=!1};return(r,p)=>{const g=Ya,w=Xe,C=Ga;return Q(),ze(C,{modelValue:h(_),"onUpdate:modelValue":p[2]||(p[2]=y=>de(_)?_.value=y:null),title:"\u5730\u56FE\u9009\u70B9"},{footer:P(()=>[I("div",ht,V(h(o).name||"--"),1),I("div",Mt,V(h(o).address||"--"),1),D(w,{onClick:p[1]||(p[1]=y=>_.value=!1)},{default:P(()=>[te("\u53D6\u6D88")]),_:1}),D(w,{type:"primary",onClick:M},{default:P(()=>[te("\u786E\u5B9A")]),_:1})]),default:P(()=>[I("div",vt,[I("div",{id:a.mapId,class:"map"},null,8,gt),I("div",mt,[D(g,{modelValue:h(n),"onUpdate:modelValue":p[0]||(p[0]=y=>de(n)?n.value=y:null),"fetch-suggestions":b,"trigger-on-focus":!1,clearable:"",placeholder:"\u8F93\u5165(\u57CE\u5E02)\u5173\u952E\u5B57\u641C\u7D22",onSelect:v,style:{width:"300px"}},null,8,["modelValue"])])])]),_:1},8,["modelValue"])}}});var bt=Ba(At,[["__scopeId","data-v-10af932e"]]);const wt=I("h3",null,"\u57FA\u7840\u9009\u70B9",-1),yt=I("h3",null,"\u9009\u70B9\u4F20\u5165\u5730\u5740\u4FE1\u606F",-1),qt=he({__name:"index",setup(e){const s=L(!1),a=re({name:"",address:"",latitude:"",longitude:""}),t=A=>{a.name=A.name,a.address=A.address,a.latitude=A.latitude,a.longitude=A.longitude},o=L(!1),n=re({}),l=re({name:"\u6CB3\u7554\u661F\u8F89",address:"\u56DB\u5DDD\u7701\u6210\u90FD\u5E02\u91D1\u725B\u533A\u661F\u8F89\u897F\u8DEF9\u53F7",latitude:30.679928703331882,longitude:104.07356941833602}),d=()=>{n.name=l.name,n.address=l.address,n.latitude=l.latitude,n.longitude=l.longitude,o.value=!0},i=A=>{l.name=A.name,l.address=A.address,l.latitude=A.latitude,l.longitude=A.longitude};return(A,_)=>{const u=Xe,b=bt,m=Pa;return Q(),ue(He,null,[D(m,null,{header:P(()=>[wt]),default:P(()=>[D(u,{onClick:_[0]||(_[0]=f=>s.value=!0),type:"primary"},{default:P(()=>[te("\u6253\u5F00\u5730\u56FE")]),_:1}),I("div",null,[I("p",null,"\u5730\u6807\u5730\u5740\uFF1A"+V(h(a).name||"--"),1),I("p",null,"\u8BE6\u7EC6\u5730\u5740\uFF1A"+V(h(a).address||"--"),1),I("p",null,"\u5750\u6807\u7ECF\u5EA6\uFF1A"+V(h(a).longitude||"--"),1),I("p",null,"\u5750\u6807\u7EAC\u5EA6\uFF1A"+V(h(a).latitude||"--"),1)]),D(b,{mapId:"map1",modelValue:h(s),"onUpdate:modelValue":_[1]||(_[1]=f=>de(s)?s.value=f:null),onConfirm:t},null,8,["modelValue"])]),_:1}),D(m,null,{header:P(()=>[yt]),default:P(()=>[D(u,{onClick:d,type:"primary"},{default:P(()=>[te("\u6253\u5F00\u5730\u56FE")]),_:1}),I("div",null,[I("p",null,"\u5730\u6807\u5730\u5740\uFF1A"+V(h(l).name||"--"),1),I("p",null,"\u8BE6\u7EC6\u5730\u5740\uFF1A"+V(h(l).address||"--"),1),I("p",null,"\u5750\u6807\u7ECF\u5EA6\uFF1A"+V(h(l).longitude||"--"),1),I("p",null,"\u5750\u6807\u7EAC\u5EA6\uFF1A"+V(h(l).latitude||"--"),1)]),D(b,{mapId:"map2",modelValue:h(o),"onUpdate:modelValue":_[2]||(_[2]=f=>de(o)?o.value=f:null),onConfirm:i,location:h(n)},null,8,["modelValue","location"])]),_:1})],64)}}});export{qt as default};
